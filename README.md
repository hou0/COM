# 化妆品检验系统

## 项目简介

化妆品检验系统是一个专门为化妆品生产企业设计的质量管理系统，旨在帮助企业规范检验流程、提高检验效率、确保产品质量。系统提供了产品管理、检验项目管理、检验报告管理、质量分析等核心功能，支持企业全面的质量管理需求。

## 技术栈

### 前端
- Vue 3 + Vite
- Vue Router
- PrimeVue (UI 组件库)
- Chart.js (图表库)
- Quill (富文本编辑器)

### 后端
- Express
- MongoDB
- Mongoose
- JWT (身份验证)
- bcryptjs (密码加密)
- xlsx (Excel 文件处理)
- pdfkit (PDF 文件生成)

## 项目结构

```
├── backend/            # 后端代码
│   ├── middlewares/    # 中间件
│   ├── models/         # 数据模型
│   ├── routes/         # 路由
│   ├── .env            # 环境变量
│   ├── app.js          # 后端入口文件
│   └── package.json    # 后端依赖配置
├── src/                # 前端代码
│   ├── components/     # 组件
│   ├── router/         # 路由
│   ├── services/       # 服务
│   ├── utils/          # 工具函数
│   ├── views/          # 页面
│   ├── App.vue         # 前端根组件
│   └── main.js         # 前端入口文件
├── dist/               # 构建产物
├── index.html          # HTML 模板
├── package.json        # 前端依赖配置
└── vite.config.js      # Vite 配置
```

## 核心功能

### 1. 产品管理
- 产品信息的添加、编辑、删除和查询
- 支持按产品类型、状态等条件筛选
- 支持批量导入产品数据
- 为每个产品关联检验项目和标准范围

### 2. 检验项目管理
- 检验项目的添加、编辑、删除和查询
- 支持按项目类型、适用产品类型等条件筛选
- 为每个检验项目设置标准范围、单位、检验方法等信息

### 3. 检验管理
- 检验报告的创建、编辑、保存和打印
- 支持自动填充产品信息和检验项目
- 支持自定义检验项目和标准
- 支持检验结论的录入和不合格品处理

### 4. 质量分析
- 基于检验数据的质量分析图表
- 支持按时间、产品类型等维度分析
- 提供不合格品统计和趋势分析

### 5. 报告管理
- 检验报告的查询和管理
- 支持按检验单号、产品编码等条件筛选
- 支持报告的导出和打印

### 6. 不合格品管理
- 不合格品信息的记录和管理
- 支持不合格原因分析和处理跟踪
- 提供不合格品统计和趋势分析

## 快速开始

### 前置条件

- Node.js 14.0 或更高版本
- MongoDB 4.0 或更高版本

### 安装步骤

1. **克隆项目**

   ```bash
   git clone <项目地址>
   cd COM
   ```

2. **安装前端依赖**

   ```bash
   npm install
   ```

3. **安装后端依赖**

   ```bash
   cd backend
   npm install
   cd ..
   ```

4. **配置环境变量**

   在 `backend` 目录下创建 `.env` 文件，并添加以下内容：

   ```env
   # MongoDB 连接字符串
   MONGODB_URI=mongodb://localhost:27017/cosmetic-inspection-system
   
   # 服务器端口
   PORT=3000
   
   # JWT 密钥
   JWT_SECRET=your-secret-key
   ```

5. **启动后端服务器**

   ```bash
   cd backend
   npm start
   # 服务器运行在 http://localhost:3000
   ```

6. **启动前端开发服务器**

   ```bash
   cd ..
   npm run dev
   # 前端运行在 http://localhost:5173
   ```

## 生产环境部署

### 构建前端项目

```bash
npm run build
# 构建产物将生成在 dist 目录
```

### 部署后端

1. 将 `backend` 目录部署到服务器
2. 确保 MongoDB 服务正常运行
3. 配置 `.env` 文件中的环境变量
4. 启动后端服务：

   ```bash
   npm start
   ```

### 部署前端

1. 将 `dist` 目录中的文件部署到静态文件服务器
2. 配置服务器的反向代理，将 API 请求转发到后端服务

## 使用说明

### 1. 初始化数据

1. **添加产品**：在产品管理页面添加产品信息
2. **添加检验项目**：在检验项目管理页面添加检验项目信息
3. **创建检验报告**：在检验管理页面创建检验报告

### 2. 检验流程

1. 在检验管理页面创建新的检验报告
2. 输入产品编码，系统会自动填充产品信息和关联的检验项目
3. 录入检验结果和实际值
4. 填写检验结论和不合格品处理方式
5. 保存检验报告
6. 在报告管理页面查看和管理检验报告

### 3. 质量分析

在质量分析页面，系统会根据检验数据生成各种图表，帮助您分析产品质量趋势和问题。

## 系统特点

- **前后端分离**：采用现代前后端分离架构，提高开发效率和系统可维护性
- **响应式设计**：支持在不同设备上正常显示和操作
- **数据本地化**：前端使用 localStorage 进行本地存储，提高系统响应速度
- **自动填充**：支持根据产品编码自动填充产品信息和检验项目
- **自定义字段**：支持自定义检验报告字段，满足不同企业的个性化需求
- **多维度分析**：提供丰富的质量分析图表，帮助企业发现质量问题和改进方向

## 注意事项

1. **环境变量配置**：确保在 `.env` 文件中正确配置 MongoDB 连接字符串
2. **数据初始化**：首次使用时，需要先添加产品和检验项目数据
3. **浏览器兼容性**：建议使用 Chrome、Firefox、Edge 等现代浏览器
4. **性能优化**：对于大量数据的导入和处理，建议分批操作
5. **安全注意事项**：
   - 系统使用 JWT 进行身份验证，确保 API 访问安全
   - 密码使用 bcryptjs 加密存储
   - 敏感信息存储在后端

## 故障排除

### 常见问题

1. **后端启动失败**
   - 检查 MongoDB 服务是否正常运行
   - 检查 `.env` 文件配置是否正确
   - 检查端口是否被占用

2. **前端无法连接后端**
   - 检查后端服务是否正常运行
   - 检查前端 API 配置是否正确
   - 检查网络连接是否正常

3. **数据无法保存**
   - 检查表单数据是否完整
   - 检查网络连接是否正常
   - 检查后端服务是否正常运行

## 未来规划

- [ ] 完善用户权限管理，支持多角色权限控制
- [ ] 添加数据备份和恢复功能
- [ ] 优化报表生成功能，增加更多报表模板
- [ ] 集成第三方系统，支持与 ERP、MES 等系统对接
- [ ] 开发移动端应用，方便现场检验数据录入
- [ ] 增加智能分析功能，预测质量趋势

## 贡献

欢迎对本项目进行贡献！如果您有任何问题或建议，请通过以下方式联系我们：

- 提交 Issue
- 提交 Pull Request

## 许可证

本项目采用 MIT 许可证。

## 联系方式

- 项目维护者：[您的姓名]
- 邮箱：[您的邮箱]
- 公司：[您的公司名称]

---

感谢您使用化妆品检验系统！我们将不断努力改进系统，为您提供更好的质量管理体验。
